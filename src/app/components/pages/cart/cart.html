<div class="cart-page">
  <div class="container">
    <div class="page-header">
      <h1>Shopping Cart</h1>
    </div>

    <div class="cart-container" *ngIf="cartItems.length > 0; else emptyCart">
      <div class="cart-items">
        <app-cart-item
          *ngFor="let item of cartItems"
          [item]="item"
          (quantityChange)="onQuantityChange(item.dish.id, $event)"
          (removeItem)="onRemoveItem(item.dish.id)">
        </app-cart-item>
      </div>

      <div class="cart-summary">
        <div class="summary-card">
          <h3>Order Summary</h3>

          <div class="summary-row">
            <span>Subtotal</span>
            <span>${{ subtotal.toFixed(2) }}</span>
          </div>

          <div class="summary-row">
            <span>Tax (10%)</span>
            <span>${{ tax.toFixed(2) }}</span>
          </div>

          <div class="summary-row">
            <span>Delivery Fee</span>
            <span *ngIf="subtotal >= 25">Free</span>
            <span *ngIf="subtotal < 25">${{ deliveryFee.toFixed(2) }}</span>
          </div>

          <div class="summary-divider"></div>

          <div class="summary-row total">
            <span>Total</span>
            <span>${{ total.toFixed(2) }}</span>
          </div>

          <div class="promo-section">
            <input
              type="text"
              [(ngModel)]="promoCode"
              placeholder="Enter promo code"
              class="promo-input"
            >
            <button class="btn-promo">Apply</button>
          </div>

          <button
            class="btn-checkout"
            routerLink="/checkout">
            Proceed to Checkout
          </button>

          <div class="free-delivery-note" *ngIf="subtotal < 25">
            <span>üéÅ Add ${{ (25 - subtotal).toFixed(2) }} more for free delivery!</span>
          </div>
        </div>

        <div class="cart-actions">
          <button
            class="btn-continue"
            routerLink="/menu">
            ‚Üê Continue Shopping
          </button>
          <button
            class="btn-clear"
            (click)="clearCart()">
            Clear Cart
          </button>
        </div>
      </div>
    </div>

    <ng-template #emptyCart>
      <app-empty-state
        icon="üõí"
        title="Your cart is empty"
        description="Add some delicious items from our menu"
        buttonText="Browse Menu"
        buttonLink="/menu">
      </app-empty-state>
    </ng-template>
  </div>
</div>
